<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contact ‚Äî Obsidian Overseer</title>
  <meta name="description" content="Get support or send feedback for Obsidian Overseer. Join our Discord or send a message." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #06070a;
      --bg-gradient: radial-gradient(ellipse 100% 80% at 50% 0%, rgba(15, 12, 20, 0.98) 0%, transparent 50%),
                    radial-gradient(ellipse 80% 50% at 50% -20%, rgba(212, 140, 60, 0.08), transparent);
      --surface: #0f1115;
      --surface2: #161a20;
      --border: #2a2520;
      --text: #f0ebe5;
      --text-muted: #9a8f82;
      --accent: #d4943c;
      --accent-dim: #b87828;
      --discord-blurple: #5865F2;
      --discord-blurple-hover: #4752c4;
      --radius: 14px;
      --radius-sm: 10px;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Outfit', sans-serif;
      background: var(--bg);
      background-image: var(--bg-gradient);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
    }
    .container { max-width: 560px; margin: 0 auto; padding: 0 24px; position: relative; z-index: 1; }
    nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px 0 24px;
    }
    .nav-logo { font-size: 1.25rem; font-weight: 700; color: var(--text); text-decoration: none; }
    .nav-logo:hover { color: var(--accent); }
    .nav-links a {
      color: var(--text-muted);
      text-decoration: none;
      font-size: 0.95rem;
      font-weight: 500;
      padding: 8px 14px;
      border-radius: var(--radius-sm);
    }
    .nav-links a:hover { color: var(--text); background: var(--surface); }
    .contact-page-title { font-size: 1.75rem; font-weight: 700; margin-bottom: 12px; color: var(--text); }
    .contact-intro { font-size: 1rem; color: var(--text-muted); margin-bottom: 32px; line-height: 1.6; }
    .contact-options { margin-bottom: 36px; }
    .contact-options h2 { font-size: 1rem; font-weight: 600; color: var(--text-muted); margin-bottom: 14px; text-transform: uppercase; letter-spacing: 0.05em; }
    .contact-cards { display: flex; flex-wrap: wrap; gap: 14px; }
    .contact-card {
      display: inline-flex;
      align-items: center;
      gap: 14px;
      padding: 20px 24px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      text-decoration: none;
      color: var(--text);
      font-weight: 600;
      font-size: 1rem;
      transition: border-color 0.2s, background 0.2s, transform 0.2s;
    }
    .contact-card:hover {
      border-color: var(--accent);
      background: var(--surface2);
      transform: translateY(-2px);
    }
    .contact-card svg { width: 24px; height: 24px; flex-shrink: 0; }
    .contact-card.discord svg { color: var(--discord-blurple); }
    .contact-card.email svg { color: var(--accent); }
    .contact-card small { display: block; font-size: 0.8rem; font-weight: 500; color: var(--text-muted); margin-top: 2px; }
    .contact-form-block {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 28px 32px;
      margin-bottom: 40px;
    }
    .contact-form-block h2 { font-size: 1.1rem; font-weight: 600; margin-bottom: 8px; color: var(--text); }
    .contact-form-block .form-intro { font-size: 0.9rem; color: var(--text-muted); margin-bottom: 22px; }
    .form-group { margin-bottom: 16px; }
    .form-group label { display: block; font-size: 0.9rem; font-weight: 500; color: var(--text-muted); margin-bottom: 6px; }
    .form-group input, .form-group textarea {
      width: 100%;
      padding: 12px 14px;
      font-family: inherit;
      font-size: 0.95rem;
      color: var(--text);
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      transition: border-color 0.2s;
    }
    .form-group input:focus, .form-group textarea:focus { outline: none; border-color: var(--accent); }
    .form-group textarea { min-height: 140px; resize: vertical; }
    .form-group .optional { font-weight: 400; color: var(--text-muted); }
    .form-group .required { color: var(--accent); }
    .form-group .radio-group { display: flex; flex-wrap: wrap; gap: 16px 24px; margin-top: 6px; }
    .form-group .radio-option { display: flex; align-items: center; gap: 8px; cursor: pointer; font-weight: 500; color: var(--text); }
    .form-group .radio-option input { width: auto; margin: 0; accent-color: var(--accent); }
    .form-submit {
      width: 100%;
      padding: 14px;
      font-family: inherit;
      font-size: 1rem;
      font-weight: 600;
      color: #fff;
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dim) 100%);
      border: none;
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: opacity 0.2s;
    }
    .form-submit:hover:not(:disabled) { opacity: 0.95; }
    .form-submit:disabled { opacity: 0.6; cursor: not-allowed; }
    .form-message { margin-top: 14px; padding: 12px 14px; font-size: 0.9rem; border-radius: var(--radius-sm); display: none; }
    .form-message.success { display: block; background: rgba(107, 207, 127, 0.15); border: 1px solid rgba(107, 207, 127, 0.4); color: #6bcf7f; }
    .form-message.error { display: block; background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); color: #f87171; }
    footer { text-align: center; padding: 28px 0 36px; color: var(--text-muted); font-size: 0.9rem; border-top: 1px solid var(--border); margin-top: 24px; }
    footer a { color: var(--accent); text-decoration: none; }
    footer a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div class="container">
    <nav>
      <a href="index.html" class="nav-logo">Obsidian Overseer</a>
      <div class="nav-links">
        <a href="index.html#features">Features</a>
        <a href="contact.html">Contact</a>
        <a href="legal.html">Legal</a>
      </div>
    </nav>

    <h1 class="contact-page-title">Support &amp; Contact</h1>
    <p class="contact-intro">For support, feedback, or inquiries about Obsidian Overseer, use one of the options below. We aim to respond within 24‚Äì48 hours.</p>

    <div class="contact-options">
      <h2>Get in touch</h2>
      <div class="contact-cards">
        <a id="contact-discord" class="contact-card discord" href="#" target="_blank" rel="noopener noreferrer" style="display: none;">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/></svg>
          <span>Join our Discord<small>Chat with the team and get support</small></span>
        </a>
        <a id="contact-email" class="contact-card email" href="#" style="display: none;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
          <span>Email us<small>Support and inquiries</small></span>
        </a>
      </div>
    </div>

    <div class="contact-form-block">
      <h2>Send a message</h2>
      <p class="form-intro">Prefer to write? Submit the form below and we‚Äôll receive it via our support channel. We use your details only to respond to your inquiry.</p>
      <form id="contact-form">
        <div class="form-group">
          <label for="contact-name">Your name <span class="optional">(optional)</span></label>
          <input type="text" id="contact-name" name="name" placeholder="Your name" maxlength="100" autocomplete="name">
        </div>
        <div class="form-group">
          <label for="contact-email-field">Email <span id="email-label-hint" class="optional">(optional)</span></label>
          <input type="email" id="contact-email-field" name="email" placeholder="you@example.com" maxlength="200" autocomplete="email">
        </div>
        <div class="form-group">
          <label>Preferred method for response</label>
          <div class="radio-group" role="group" aria-label="Preferred method for response">
            <label class="radio-option">
              <input type="radio" name="preferred-response" value="Discord" id="pref-discord">
              Discord
            </label>
            <label class="radio-option">
              <input type="radio" name="preferred-response" value="Email" id="pref-email">
              Email
            </label>
            <label class="radio-option">
              <input type="radio" name="preferred-response" value="Either" id="pref-either" checked>
              Either
            </label>
          </div>
        </div>
        <div class="form-group discord-username-wrap" id="discord-username-wrap" style="display: none;">
          <label for="contact-discord-username">Your Discord username <span class="optional">(so we can reach you)</span></label>
          <input type="text" id="contact-discord-username" name="discord_username" placeholder="e.g. username or username#1234" maxlength="100" autocomplete="username">
        </div>
        <div class="form-group">
          <label for="contact-message">Message <span style="color: var(--accent);">*</span></label>
          <textarea id="contact-message" name="message" placeholder="Describe your question or feedback..." required maxlength="2000"></textarea>
        </div>
        <button type="submit" class="form-submit" id="contact-submit">Send message</button>
        <p id="contact-form-message" class="form-message" role="alert"></p>
      </form>
    </div>

    <footer>
      <p><a href="index.html">‚Üê Back to Obsidian Overseer</a></p>
    </footer>
  </div>

  <script>
    // ‚Äî‚Äî‚Äî Contact page config ‚Äî‚Äî‚Äî
    var DISCORD_SERVER_INVITE = 'https://discord.gg/cNchBqnhjy';
    var CONTACT_EMAIL = '';
    // GitHub Pages: set your Discord webhook URL here. It will be visible in the repo/source ‚Äî use a private channel and rotate if abused.
    // Netlify: leave this empty and set CONTACT_WEBHOOK_URL in the Netlify dashboard instead (webhook stays hidden).
    var CONTACT_WEBHOOK_URL = 'https://discord.com/api/webhooks/1471771569197027364/40lA9NMgphFHpIzt0mS8250kh--oD-JFIc4FPy3-ohfJ8vqrUMi37Rk2CFcDlEnE3dlI';
    var CONTACT_API = '/.netlify/functions/contact';

    (function() {
      if (DISCORD_SERVER_INVITE && DISCORD_SERVER_INVITE.trim()) {
        var el = document.getElementById('contact-discord');
        el.href = DISCORD_SERVER_INVITE.trim();
        el.style.display = 'inline-flex';
      }
      if (CONTACT_EMAIL && CONTACT_EMAIL.trim()) {
        var el = document.getElementById('contact-email');
        el.href = 'mailto:' + CONTACT_EMAIL.trim();
        el.style.display = 'inline-flex';
      }
    })();

    (function() {
      var discordWrap = document.getElementById('discord-username-wrap');
      var emailInput = document.getElementById('contact-email-field');
      var emailLabelHint = document.getElementById('email-label-hint');
      var preferredRadios = document.querySelectorAll('input[name="preferred-response"]');

      function updateEmailRequired() {
        var preferred = (document.querySelector('input[name="preferred-response"]:checked') || {}).value || 'Either';
        if (preferred === 'Email') {
          emailInput.required = true;
          emailLabelHint.textContent = '(required)';
          emailLabelHint.classList.remove('optional');
          emailLabelHint.classList.add('required');
        } else {
          emailInput.required = false;
          emailLabelHint.textContent = '(optional)';
          emailLabelHint.classList.add('optional');
          emailLabelHint.classList.remove('required');
        }
      }

      preferredRadios.forEach(function(radio) {
        radio.addEventListener('change', function() {
          discordWrap.style.display = this.value === 'Discord' ? 'block' : 'none';
          if (this.value === 'Discord') {
            document.getElementById('contact-discord-username').focus();
          }
          updateEmailRequired();
        });
      });
      updateEmailRequired();
    })();

    (function() {
      var form = document.getElementById('contact-form');
      var submitBtn = document.getElementById('contact-submit');
      var msgEl = document.getElementById('contact-form-message');

      function showMsg(text, isError) {
        msgEl.textContent = text;
        msgEl.className = 'form-message ' + (isError ? 'error' : 'success');
        msgEl.style.display = 'block';
      }
      function hideMsg() {
        msgEl.style.display = 'none';
        msgEl.className = 'form-message';
      }

      form.addEventListener('submit', async function(e) {
        e.preventDefault();
        hideMsg();
        var name = (document.getElementById('contact-name').value || '').trim();
        var email = (document.getElementById('contact-email-field').value || '').trim();
        var preferred = (document.querySelector('input[name="preferred-response"]:checked') || {}).value || 'Either';
        var discordUsername = (document.getElementById('contact-discord-username').value || '').trim();
        var message = (document.getElementById('contact-message').value || '').trim();
        if (!message) {
          showMsg('Please enter a message.', true);
          return;
        }
        if (preferred === 'Email' && !email) {
          showMsg('Please enter your email so we can reach you.', true);
          return;
        }
        if (message.length > 2000) {
          showMsg('Message must be 2000 characters or less.', true);
          return;
        }
        var webhookUrl = (typeof CONTACT_WEBHOOK_URL === 'string' && CONTACT_WEBHOOK_URL.trim()) ? CONTACT_WEBHOOK_URL.trim() : '';
        var apiUrl = (typeof CONTACT_API === 'string' && CONTACT_API.trim()) ? CONTACT_API.trim() : '';
        if (!webhookUrl && !apiUrl) {
          showMsg('This form is not configured. Please use Discord or email above.', true);
          return;
        }
        submitBtn.disabled = true;
        if (webhookUrl) {
          var embed = {
            title: 'üì© New message from website',
            color: 0x8b7cf8,
            fields: [
              { name: 'From', value: name || '‚Äî', inline: true },
              { name: 'Email', value: email || '‚Äî', inline: true },
              { name: 'Preferred response', value: preferred, inline: true },
              { name: 'Discord username', value: discordUsername || '‚Äî', inline: true },
              { name: 'Message', value: message.slice(0, 1024), inline: false },
            ],
            footer: { text: 'Obsidian Overseer contact form' },
            timestamp: new Date().toISOString(),
          };
          if (message.length > 1024) {
            embed.fields.push({ name: '(continued)', value: message.slice(1024, 2048), inline: false });
          }
          try {
            var res = await fetch(webhookUrl, {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ embeds: [embed] }),
            });
            if (res.ok) {
              showMsg('Thank you. Your message has been sent and we\'ll get back to you as soon as we can.', false);
              form.reset();
            } else {
              showMsg('Something went wrong. Please try again or use Discord/email above.', true);
            }
          } catch (err) {
            showMsg('Unable to send. Check your connection and try again, or use Discord/email above.', true);
          }
          submitBtn.disabled = false;
          return;
        }
        try {
          var res = await fetch(apiUrl, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ name: name, email: email, preferred: preferred, discordUsername: discordUsername, message: message }),
          });
          var data = {};
          try { data = await res.json(); } catch (_) {}
          if (res.ok && data.ok) {
            showMsg('Thank you. Your message has been sent and we‚Äôll get back to you as soon as we can.', false);
            form.reset();
          } else if (res.status === 503 || (data.error && data.error.indexOf('not configured') !== -1)) {
            showMsg('Contact form is not set up on this server. Please use Discord or email above.', true);
          } else {
            showMsg(data.error || 'Something went wrong. Please try again or use Discord/email above.', true);
          }
        } catch (err) {
          showMsg('Unable to send. Check your connection and try again, or use Discord/email above.', true);
        }
        submitBtn.disabled = false;
      });
    })();
  </script>
</body>
</html>
